(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{430:function(a,t,s){"use strict";s.r(t);var e=s(2),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"docker概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker概念"}},[a._v("#")]),a._v(" Docker概念")]),a._v(" "),t("p",[t("code",[a._v("Docker")]),a._v("是一个开源的应用容器引擎，它是基于"),t("code",[a._v("Go")]),a._v("语言并遵从"),t("code",[a._v("Apache2.0")]),a._v("协议开源。"),t("code",[a._v("Docker")]),a._v("可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的"),t("code",[a._v("linux")]),a._v("机器上，也可以实现虚拟化。通过容器可以实现方便快速并且与平台解耦的自动化部署方式，无论你部署时的环境如何，容器中的应用程序都会运行在同一种环境下。并且它是完全使用沙箱机制，相互之间是隔离的，更重要的是容器性能开销极低。")]),a._v(" "),t("p",[a._v("Docker 作为轻量级虚拟化技术，拥有持续集成、版本控制、可移植性、隔离性和安全性等优势。")]),a._v(" "),t("p",[t("code",[a._v("Docker")]),a._v("从"),t("code",[a._v("17.03")]),a._v("版本之后分为"),t("strong",[a._v("CE（Community Edition：社区版）"),t("strong",[a._v("和")]),a._v("EE（Enterprise Edition：企业版）")])]),a._v(" "),t("p",[t("strong",[a._v("docker是一种容器技术，它主要是用来解决软件跨环境迁移的问题")])]),a._v(" "),t("h2",{attrs:{id:"安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[a._v("#")]),a._v(" 安装Docker")]),a._v(" "),t("p",[t("code",[a._v("Docker")]),a._v("可以运行在"),t("code",[a._v("Mac")]),a._v(", "),t("code",[a._v("Windows")]),a._v(", "),t("code",[a._v("linux")]),a._v("等操作系统上")]),a._v(" "),t("p",[a._v("以"),t("code",[a._v("Mac")]),a._v("为例")]),a._v(" "),t("h3",{attrs:{id:"使用homebrew安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用homebrew安装"}},[a._v("#")]),a._v(" 使用Homebrew安装")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("brew "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--cask")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\n")])])]),t("h3",{attrs:{id:"桌面版安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#桌面版安装"}},[a._v("#")]),a._v(" 桌面版安装")]),a._v(" "),t("p",[a._v("除了使用终端外，它还可以使用桌面版，操作更方便")]),a._v(" "),t("p",[a._v("如果需要手动下载，请点击以下 "),t("a",{attrs:{href:"https://desktop.docker.com/mac/main/amd64/Docker.dmg",target:"_blank",rel:"noopener noreferrer"}},[a._v("链接"),t("OutboundLink")],1),a._v(" 下载 Docker Desktop for Mac。")]),a._v(" "),t("p",[a._v("检测是否安装成功")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n")])])]),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6572e2efc1284148ab7406140f28eb0c~tplv-k3u1fbpfcp-watermark.image?",alt:"docker1.png"}})]),a._v(" "),t("h3",{attrs:{id:"尝试运行一个nginx服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#尝试运行一个nginx服务器"}},[a._v("#")]),a._v(" 尝试运行一个"),t("code",[a._v("Nginx服务器")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" webserver nginx\n")])])]),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27924ed2cdd842adbd43b10343b880ee~tplv-k3u1fbpfcp-watermark.image?",alt:"docker2.png"}})]),a._v(" "),t("p",[a._v("当本地没找到nginx镜像时，它会去远程仓库中拉取，服务运行后，就可以通过"),t("code",[a._v("localhost")]),a._v("来访问了")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4df7f138e2ca4082be35cd881b833d23~tplv-k3u1fbpfcp-watermark.image?",alt:"docker3.png"}})]),a._v(" "),t("h3",{attrs:{id:"镜像加速"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像加速"}},[a._v("#")]),a._v(" 镜像加速")]),a._v(" "),t("p",[a._v("如果在使用过程中发现拉取镜像十分缓慢，那是因为"),t("code",[a._v("docker")]),a._v("服务器是在国外的，但我们可以通过配置"),t("code",[a._v("docker")]),a._v("国内镜像来进行加速")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("镜像加速器")]),a._v(" "),t("th",[a._v("镜像加速器地址")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("Docker 中国官方镜像")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://registry.docker-cn.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://registry.docker-cn.com"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("DaoCloud 镜像站")]),a._v(" "),t("td",[t("a",{attrs:{href:"http://f1361db2.m.daocloud.io",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://f1361db2.m.daocloud.io"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("Azure 中国镜像")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://dockerhub.azk8s.cn",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://dockerhub.azk8s.cn"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("科大镜像站")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://docker.mirrors.ustc.edu.cn",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://docker.mirrors.ustc.edu.cn"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("阿里云")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://ud6340vz.mirror.aliyuncs.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://ud6340vz.mirror.aliyuncs.com"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("七牛云")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://reg-mirror.qiniu.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://reg-mirror.qiniu.com"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("网易云")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://hub-mirror.c.163.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://hub-mirror.c.163.com"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("腾讯云")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://mirror.ccs.tencentyun.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://mirror.ccs.tencentyun.com"),t("OutboundLink")],1)])])])]),a._v(" "),t("p",[a._v("在任务栏点击 "),t("code",[a._v("Docker Desktop")]),a._v(" 应用图标 -> "),t("code",[a._v("Settings...")]),a._v("，在左侧导航菜单选择 "),t("code",[a._v("Docker Engine")]),a._v("，在右侧像下边一样编辑 json 文件。")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://registry.docker-cn.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://hub-mirror.c.163.com"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("修改完成之后，点击 "),t("code",[a._v("Apply & restart")]),a._v(" 按钮，Docker 就会重启并应用配置的镜像地址了。")]),a._v(" "),t("p",[a._v("配置完可以执行"),t("code",[a._v("docker info")]),a._v("检查加速器是否生效")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" info\n")])])]),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/51b78976a96e413992ef180849a3cd16~tplv-k3u1fbpfcp-watermark.image?",alt:"docker4.png"}})]),a._v(" "),t("h2",{attrs:{id:"docker三要素"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker三要素"}},[a._v("#")]),a._v(" Docker三要素")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b35dd069d0734dc8bc7ac0a044e47fe5~tplv-k3u1fbpfcp-watermark.image?",alt:"docker5.png"}})]),a._v(" "),t("h3",{attrs:{id:"镜像-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像-image"}},[a._v("#")]),a._v(" 镜像(image)")]),a._v(" "),t("p",[t("strong",[a._v("Docker 镜像")]),a._v(" 是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像 "),t("strong",[a._v("不包含")]),a._v(" 任何动态数据，其内容在构建之后也不会被改变。")]),a._v(" "),t("h3",{attrs:{id:"容器-container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器-container"}},[a._v("#")]),a._v(" 容器(container)")]),a._v(" "),t("p",[a._v("镜像（"),t("code",[a._v("Image")]),a._v("）和容器（"),t("code",[a._v("Container")]),a._v("）的关系，就像是面向对象程序设计中的 "),t("code",[a._v("类")]),a._v(" 和 "),t("code",[a._v("实例")]),a._v(" 一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。")]),a._v(" "),t("p",[a._v("简单理解就是"),t("strong",[a._v("容器是镜像的一个运行实例。当我们运行一个镜像，就创建了一个容器。")])]),a._v(" "),t("h3",{attrs:{id:"仓库-repository"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#仓库-repository"}},[a._v("#")]),a._v(" 仓库(repository)")]),a._v(" "),t("p",[a._v("镜像构建完成后，可以很容易的在当前宿主机上运行，但是，如果需要在其它服务器上使用这个镜像，我们就需要一个集中的存储、分发镜像的服务，"),t("code",[a._v("Docker Registry")]),a._v(" 就是这样的服务。")]),a._v(" "),t("h2",{attrs:{id:"使用镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用镜像"}},[a._v("#")]),a._v(" 使用镜像")]),a._v(" "),t("h3",{attrs:{id:"拉取镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[a._v("#")]),a._v(" 拉取镜像")]),a._v(" "),t("p",[a._v("在"),t("a",{attrs:{href:"https://hub.docker.com/search?q=&type=image",target:"_blank",rel:"noopener noreferrer"}},[a._v("Docker Hub"),t("OutboundLink")],1),a._v(" 上有大量的高质量的镜像可以用，我们可以使用"),t("code",[a._v("docker pull")]),a._v("从镜像仓库中拉取对应的镜像。")]),a._v(" "),t("p",[a._v("格式为：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("选项"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("docker Registry 地址"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":端口号"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("仓库名"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":标签"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("具体的选项可以通过 "),t("code",[a._v("docker pull --help")]),a._v(" 命令看到，这里我们说一下镜像名称的格式。")]),a._v(" "),t("ul",[t("li",[a._v("Docker 镜像仓库地址：地址的格式一般是 "),t("code",[a._v("<域名/IP>[:端口号]")]),a._v("。默认地址是 Docker Hub("),t("code",[a._v("docker.io")]),a._v(")。")]),a._v(" "),t("li",[a._v("仓库名：这里的仓库名是两段式名称，即 "),t("code",[a._v("<用户名>/<软件名>")]),a._v("。对于 Docker Hub，如果不给出用户名，则默认为 "),t("code",[a._v("library")]),a._v("，也就是官方镜像。")])]),a._v(" "),t("p",[a._v("比如拉取一个node镜像：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull node:18-alpine\n")])])]),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95f79ebeb2574217a2326db98008a8b9~tplv-k3u1fbpfcp-watermark.image?",alt:"docker6.png"}})]),a._v(" "),t("p",[a._v("这里我们拉取镜像的时候只是给出了镜像名称（仓库名+标签）也就是"),t("code",[a._v("node:18-alpine")]),a._v("，并没有给出"),t("code",[a._v("Docker")]),a._v("镜像的仓库地址，所以它会从默认地址"),t("code",[a._v("docker.io")]),a._v("拉取镜像")]),a._v(" "),t("p",[a._v("从上图我们可以看到"),t("code",[a._v("docker pull")]),a._v(" 命令的输出结果给出了镜像的完整名称，即： "),t("code",[a._v("docker.io/library/node:18-alpine")]),a._v("。")]),a._v(" "),t("h3",{attrs:{id:"查看镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看镜像"}},[a._v("#")]),a._v(" 查看镜像")]),a._v(" "),t("p",[a._v("如果想要查看本地已经下载的镜像，可以使用"),t("code",[a._v("docker image ls")]),a._v("命令")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/28bb4cf4168d41268db7199102ddd80b~tplv-k3u1fbpfcp-watermark.image?",alt:"docker7.png"}})]),a._v(" "),t("p",[a._v("列表包含了 "),t("code",[a._v("仓库名")]),a._v("、"),t("code",[a._v("标签")]),a._v("、"),t("code",[a._v("镜像 ID")]),a._v("、"),t("code",[a._v("创建时间")]),a._v(" 以及 "),t("code",[a._v("所占用的空间")]),a._v("。")]),a._v(" "),t("p",[a._v("当然也可以在"),t("code",[a._v("docker")]),a._v("桌面端中直接查看：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/78bd291e1d914ea8bb605e9440b99f70~tplv-k3u1fbpfcp-watermark.image?",alt:"docker8.png"}})]),a._v(" "),t("h3",{attrs:{id:"删除镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除镜像"}},[a._v("#")]),a._v(" 删除镜像")]),a._v(" "),t("p",[a._v("如果想要删除本地镜像，可以使用"),t("code",[a._v("docker image rm")]),a._v("命令")]),a._v(" "),t("p",[a._v("格式为：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" image "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("选项"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("镜像"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("1")]),a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("镜像"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("其中，"),t("code",[a._v("<镜像>")]),a._v(" 可以是 "),t("code",[a._v("镜像短 ID")]),a._v("、"),t("code",[a._v("镜像长 ID")]),a._v("、"),t("code",[a._v("镜像名")]),a._v(" 或者 "),t("code",[a._v("镜像摘要")]),a._v("。")]),a._v(" "),t("p",[a._v("比如删除我们刚拉取的node镜像")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" image "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" node:18-alpine   \n")])])]),t("p",[a._v("如果想批量删除镜像可以使用"),t("code",[a._v("docker image ls -q")]),a._v("来配合使用"),t("code",[a._v("docker image rm")])]),a._v(" "),t("p",[a._v("比如，我们需要删除所有仓库名为 "),t("code",[a._v("redis")]),a._v(" 的镜像：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" image "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" image "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q")]),a._v(" redis"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])])]),t("p",[a._v("或者删除所有在 "),t("code",[a._v("mongo:3.2")]),a._v(" 之前的镜像：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" image "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" image "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("before")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mongo:3.2"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])])]),t("p",[a._v("更多指令可通过"),t("code",[a._v("docker image --help")]),a._v("查看")]),a._v(" "),t("h2",{attrs:{id:"操作容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作容器"}},[a._v("#")]),a._v(" 操作容器")]),a._v(" "),t("h3",{attrs:{id:"查看容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器"}},[a._v("#")]),a._v(" 查看容器")]),a._v(" "),t("p",[a._v("查看正在运行的容器:")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v("\n")])])]),t("p",[a._v("查看所有容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("\n")])])]),t("h3",{attrs:{id:"启动容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动容器"}},[a._v("#")]),a._v(" 启动容器")]),a._v(" "),t("p",[a._v("启动容器一般有两种情况：")]),a._v(" "),t("ul",[t("li",[a._v("基于镜像新建一个容器并启动")]),a._v(" "),t("li",[a._v("将已有的终止状态（exited）的容器重新启动")])]),a._v(" "),t("h4",{attrs:{id:"新建并启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建并启动"}},[a._v("#")]),a._v(" 新建并启动")]),a._v(" "),t("p",[a._v("使用的命令是"),t("code",[a._v("docker run")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("node")]),a._v("\n")])])]),t("p",[a._v("参数说明：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("-i")]),a._v("：交互式操作")]),a._v(" "),t("li",[t("code",[a._v("-t")]),a._v("：终端")]),a._v(" "),t("li",[t("code",[a._v("node")]),a._v("：node镜像")])]),a._v(" "),t("h4",{attrs:{id:"启动终止状态的容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动终止状态的容器"}},[a._v("#")]),a._v(" 启动终止状态的容器")]),a._v(" "),t("p",[a._v("首先查看所有的容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("\n")])])]),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b7a26265fb3c49dc9840055485422f06~tplv-k3u1fbpfcp-watermark.image?",alt:"docker9.png"}})]),a._v(" "),t("p",[a._v("然后可以使用"),t("code",[a._v("docker start")]),a._v("启动一个停止的容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" start 7e7ff4af478f\n")])])]),t("h4",{attrs:{id:"重启容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启容器"}},[a._v("#")]),a._v(" 重启容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" restart a03b0445b82d\n")])])]),t("h3",{attrs:{id:"后台运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#后台运行"}},[a._v("#")]),a._v(" 后台运行")]),a._v(" "),t("p",[a._v("大部分情况下，我们都希望"),t("code",[a._v("docker")]),a._v("是在后台运行的，这里可以通过"),t("code",[a._v("-d")]),a._v("指定容器的运行模式")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" node:latest\n")])])]),t("h3",{attrs:{id:"停止容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#停止容器"}},[a._v("#")]),a._v(" 停止容器")]),a._v(" "),t("p",[a._v("停止容器命令如下")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("容器 id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("p",[a._v("先查看所有容器")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/25d2426bbe3c4374a51cee8436d7132f~tplv-k3u1fbpfcp-watermark.image?",alt:"docker10.png"}})]),a._v(" "),t("p",[a._v("再停止容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop 3c275da2f36d\n")])])]),t("p",[t("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adc52d6235a4423fa9d72fa6bbb0cc24~tplv-k3u1fbpfcp-watermark.image?",alt:"docker11.png"}})]),a._v(" "),t("h3",{attrs:{id:"进入容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入容器"}},[a._v("#")]),a._v(" 进入容器")]),a._v(" "),t("p",[a._v("当我们使用"),t("code",[a._v("-d")]),a._v("参数时，容器启动会进入后台，此时想要进入容器可以通过以下指令：")]),a._v(" "),t("p",[t("strong",[a._v("exec")]),a._v("（推荐使用）")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" a03b0445b82d /bin/bash\n")])])]),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dbf62d3c30ae41c6b7ca169ed1804928~tplv-k3u1fbpfcp-watermark.image?",alt:"docker12.png"}})]),a._v(" "),t("p",[t("strong",[a._v("注意：")]),a._v(" 如果从这个容器退出，容器不会停止，这就是为什么推荐大家使用 "),t("strong",[a._v("docker exec")]),a._v(" 的原因。")]),a._v(" "),t("p",[a._v("当容器中没有"),t("code",[a._v("bash")]),a._v("，可以自行安装")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("apk update "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" apk "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n")])])]),t("p",[t("strong",[a._v("attach")]),a._v("（不推荐使用）")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" attach a03b0445b82d\n")])])]),t("p",[t("strong",[a._v("注意：")]),a._v(" 如果从这个容器退出，会导致容器的停止。")]),a._v(" "),t("h3",{attrs:{id:"删除容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除容器"}},[a._v("#")]),a._v(" 删除容器")]),a._v(" "),t("p",[a._v("删除容器可以使用"),t("code",[a._v("docker rm")]),a._v("命令")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" a03b0445b82d\n")])])]),t("p",[a._v("如果想要删除所有终止状态的容器可以使用以下指令：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" container prune\n")])])]),t("h2",{attrs:{id:"小试牛刀-部署一个前端项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小试牛刀-部署一个前端项目"}},[a._v("#")]),a._v(" 小试牛刀（部署一个前端项目）")]),a._v(" "),t("p",[a._v("首先准备一个vue项目，在项目根路径下添加"),t("code",[a._v("Dockerfile")]),a._v("文件")]),a._v(" "),t("h3",{attrs:{id:"编写dockerfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编写dockerfile"}},[a._v("#")]),a._v(" 编写Dockerfile")]),a._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定node镜像")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" node:16-alpine "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" builder")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定工作目录")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WORKDIR")]),a._v(" /code")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 代码复制到容器中")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ADD")]),a._v(" . /code")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装依赖")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("RUN")]),a._v(" npm install --registry=https://registry.npm.taobao.org")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 打包")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("RUN")]),a._v(" npm run build")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# RUN ls")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定nginx镜像")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" nginx:latest")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 复制打包后的代码到nginx容器中")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("COPY")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token options"}},[t("span",{pre:!0,attrs:{class:"token property"}},[a._v("--from")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("builder")])]),a._v(" /code/dist /usr/share/nginx/html")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 暴露端口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("EXPOSE")]),a._v(" 80")]),a._v("\n")])])]),t("h3",{attrs:{id:"打包镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包镜像"}},[a._v("#")]),a._v(" 打包镜像")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" web-nanjiu "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n")])])]),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f0b7e7642974df69c2d29b08e3f5149~tplv-k3u1fbpfcp-watermark.image?",alt:"docker13.png"}})]),a._v(" "),t("h3",{attrs:{id:"启动容器-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动容器-2"}},[a._v("#")]),a._v(" 启动容器")]),a._v(" "),t("p",[a._v("在镜像打包完成之后，我们可以使用该镜像来启动一个容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-itd")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0:9090:80 web-nanjiu\n")])])]),t("p",[a._v("这里的"),t("code",[a._v("-p")]),a._v("表示将容器的端口映射到宿主机的端口，这里的宿主机也就是我们本地了")]),a._v(" "),t("p",[a._v("前面的"),t("code",[a._v("0.0.0.0:9090")]),a._v("表示宿主机端口")]),a._v(" "),t("p",[a._v("后面的"),t("code",[a._v("80")]),a._v("表示容器的端口")]),a._v(" "),t("p",[a._v("启动完我们直接使用"),t("code",[a._v("http://localhost:9090/")]),a._v("进行访问")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a6dfb2d4f6b34424abbd0478ac193a59~tplv-k3u1fbpfcp-watermark.image?",alt:"docker14.png"}})]),a._v(" "),t("p",[a._v("当看到这个页面时就代表"),t("code",[a._v("docker")]),a._v("部署成功了")]),a._v(" "),t("p",[a._v("当然你也可以使用"),t("code",[a._v("docker ps")]),a._v("查看此时正在运行的容器")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0cf6ebfb7add4916a8d1116c952d5686~tplv-k3u1fbpfcp-watermark.image?",alt:"docker15.png"}})]),a._v(" "),t("p",[t("strong",[a._v("如果这篇文章有帮助到你，❤️关注+点赞❤️鼓励一下作者，关注 "),t("code",[a._v("前端南玖")]),a._v(" 第一时间获取最新文章～")])])])}),[],!1,null,null,null);t.default=r.exports}}]);